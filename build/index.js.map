{"version":3,"file":"index.js","mappings":"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","sources":["webpack://collection-form/./src/App.js","webpack://collection-form/./src/components/CollectionForm.jsx","webpack://collection-form/./src/style/main.scss","webpack://collection-form/external window \"React\"","webpack://collection-form/external window [\"wp\",\"element\"]","webpack://collection-form/webpack/bootstrap","webpack://collection-form/webpack/runtime/compat get default export","webpack://collection-form/webpack/runtime/define property getters","webpack://collection-form/webpack/runtime/hasOwnProperty shorthand","webpack://collection-form/webpack/runtime/make namespace object","webpack://collection-form/./src/index.js"],"sourcesContent":["import React from 'react';\nimport CollectionForm from './components/CollectionForm';\n\nconst App = () => {\n    return (\n        <>\n            <CollectionForm />\n        </>\n);\n}\n\nexport default App;","import React from 'react'\nconst CollectionForm = () => {\n\n    const empty_client_obj = {\n        name: null,\n        regon: null,\n        krs: null,\n        workingAddress: null,\n        registrationLegalDate: null\n    }\n\n    const [client_nip, setClientNip] = React.useState('');\n    const [client_data, setClientData] = React.useState(empty_client_obj)\n    const [client_message, setClientMessage] = React.useState('')\n\n\n    const [debtor_nip, setDebtorNip] = React.useState('');\n    const [debtor_data, setDebtorData] = React.useState(empty_client_obj)\n    const [debtor_message, setDebtorMessage] = React.useState('')\n\n\n    function getNipDetail(nip) {\n        return fetch(`https://wl-api.mf.gov.pl/api/search/nip/${nip}?date=2023-08-29`)\n                .then(async response => {\n                    return await response;\n                });\n    }\n\n    async function checkResponse(response){\n        const response_json = await response.json();\n        if (!response.ok){\n            return [empty_client_obj, response_json.message];\n        } else {\n            return [response_json.result.subject, ''];\n        }\n\n    }\n\n    function isValidNip(nip) {\n        if(typeof nip !== 'string')\n            return false;\n\n        nip = nip.replace(/[\\ \\-]/gi, '');\n\n        let weight = [6, 5, 7, 2, 3, 4, 5, 6, 7];\n        let sum = 0;\n        let controlNumber = parseInt(nip.substring(9, 10));\n        let weightCount = weight.length;\n        for (let i = 0; i < weightCount; i++) {\n            sum += (parseInt(nip.substr(i, 1)) * weight[i]);\n        }\n\n        return sum % 11 === controlNumber;\n    }\n\n\n    function checkNip(nip) {\n        if (isValidNip(nip)){\n            return [true, \"\"];\n        } else {\n            const nip_length = nip.length;\n\n            switch (nip_length) {\n                case (0):\n                    return [false, \"Pole 'NIP' nie może być puste.\"];\n                case (10):\n                    return [false, \"Nieprawidłowy 'NIP'\"];\n                default:\n                    return [false, \"Pole 'NIP' ma nieprawidłową długość. Wymagane 10 znaków.\"];\n            }\n        }\n    }\n    async function getClientNipDetail(nip) {\n\n        const [is_valid_nip, nip_message] = checkNip(nip);\n\n        if (is_valid_nip) {\n            const [subject, message] = await getNipDetail(nip).then(response => checkResponse(response));\n            setClientData(subject !== null ? subject : empty_client_obj);\n            setClientMessage(subject !== null ? message : `Nie znaleziono nip: ${nip}`);\n        } else {\n            setClientData(empty_client_obj);\n            setClientMessage(nip_message);\n        }\n    }\n\n    async function getDebtorNipDetail(nip) {\n        const [is_valid_nip, nip_message] = checkNip(nip);\n\n        if (is_valid_nip) {\n            const [subject, message] = await getNipDetail(nip).then(response => checkResponse(response));\n            setDebtorData(subject !== null ? subject : empty_client_obj);\n            setDebtorMessage(subject !== null ? message : `Nie znaleziono nip: ${nip}`);\n        } else {\n            setDebtorData(empty_client_obj);\n            setDebtorMessage(nip_message);\n        }\n    }\n\n    React.useEffect(() => {\n        getClientNipDetail(client_nip);\n    }, [client_nip]);\n\n    React.useEffect(() => {\n        getDebtorNipDetail(debtor_nip);\n    }, [debtor_nip]);\n\n    function detailView(obj) {\n        return (<>\n            <p>Nazwa: <br/>{obj.name}</p>\n            <p>REGON: <br/>{obj.regon}</p>\n            <p>KRS: <br/>{obj.krs}</p>\n            <p>Adres: <br/>{obj.workingAddress}</p>\n            <p>Data rozpoczęcia działalności: <br/>{obj.registrationLegalDate}</p>\n        </>);\n    }\n\n    return (\n        <div className='row'>\n            <div className='col'>\n                <label>Twój NIP</label>\n                <input\n                    type='text'\n                    value={client_nip}\n                    onChange={(e) => setClientNip(e.target.value)}\n                />\n                <div className='error-message'>\n                    {client_message !== '' && client_message}\n                </div>\n                <div>\n                    {client_data.name !== null && detailView(client_data)}\n                </div>\n            </div>\n            <div className='col'>\n                <label>NIP Dłużnika</label>\n                <input\n                    type='text'\n                    value={debtor_nip}\n                    onChange={(e) => setDebtorNip(e.target.value)}\n                />\n                <div className='error-message'>\n                    {debtor_message !== '' && debtor_message}\n                </div>\n                <div>{debtor_data.name !== null && detailView(debtor_data)}</div>\n            </div>\n        </div>\n    );\n}\n\nexport default CollectionForm;","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import App from \"./App\";\nimport { render } from '@wordpress/element';\n\n/**\n * Import the stylesheet for the plugin.\n */\nimport './style/main.scss';\n\n// Render the App component into the DOM\nrender(<App />, document.getElementById('collection-form'));"],"names":["React","CollectionForm","App","createElement","Fragment","empty_client_obj","name","regon","krs","workingAddress","registrationLegalDate","client_nip","setClientNip","useState","client_data","setClientData","client_message","setClientMessage","debtor_nip","setDebtorNip","debtor_data","setDebtorData","debtor_message","setDebtorMessage","getNipDetail","nip","fetch","then","response","checkResponse","response_json","json","ok","message","result","subject","isValidNip","replace","weight","sum","controlNumber","parseInt","substring","weightCount","length","i","substr","checkNip","nip_length","getClientNipDetail","is_valid_nip","nip_message","getDebtorNipDetail","useEffect","detailView","obj","className","type","value","onChange","e","target","render","document","getElementById"],"sourceRoot":""}